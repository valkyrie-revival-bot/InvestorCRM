---
phase: 01-foundation-environment
plan: 03
type: execute
wave: 3
depends_on: ["01-01", "01-02"]
files_modified:
  - vercel.json
  - .gitignore
autonomous: false
user_setup:
  - service: vercel
    why: "Deployment and hosting platform"
    env_vars:
      - name: NEXT_PUBLIC_SUPABASE_URL
        source: "Same as .env.local - set in Vercel Project Settings -> Environment Variables"
      - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
        source: "Same as .env.local - set in Vercel Project Settings -> Environment Variables"
      - name: SUPABASE_SERVICE_ROLE_KEY
        source: "Same as .env.local - set in Vercel Project Settings -> Environment Variables"
      - name: ANTHROPIC_API_KEY
        source: "Same as .env.local - set in Vercel Project Settings -> Environment Variables"
    dashboard_config:
      - task: "Link GitHub repository to Vercel project (or use CLI deploy)"
        location: "Vercel Dashboard -> New Project -> Import Git Repository"
      - task: "Set environment variables in Vercel project settings"
        location: "Vercel Dashboard -> Project -> Settings -> Environment Variables"

must_haves:
  truths:
    - "Development server runs locally without errors on localhost:3000"
    - "Vercel deployment pipeline is configured"
    - "First deploy to Vercel succeeds with accessible URL"
    - "Application loads correctly at deployed URL"
  artifacts:
    - path: ".gitignore"
      provides: "Git ignore rules for Node.js and Next.js project"
      contains: ".env.local"
  key_links:
    - from: "vercel deployment"
      to: "environment variables"
      via: "Vercel project settings must have all env vars from .env.example"
      pattern: "NEXT_PUBLIC_SUPABASE_URL"
---

<objective>
Verify the development server runs correctly, configure Vercel deployment, and complete first production deploy. Validate the entire foundation works end-to-end.

Purpose: Closes the Phase 1 loop by confirming the development environment works locally AND deploys successfully to production. The Friday demo requires a live URL.

Output: Working development server, configured Vercel project, live production URL.
</objective>

<execution_context>
@/Users/RAZER/.claude/get-shit-done/workflows/execute-plan.md
@/Users/RAZER/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-environment/01-RESEARCH.md
@.planning/phases/01-foundation-environment/01-01-SUMMARY.md
@.planning/phases/01-foundation-environment/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify development server and prepare for deployment</name>
  <files>
    .gitignore
  </files>
  <action>
    1. Ensure .gitignore includes all necessary entries:
       - .env.local (secrets)
       - .env*.local (all local env files)
       - node_modules/
       - .next/
       - .vercel/
       If .gitignore was created by create-next-app, verify these are present and add any missing.

    2. Start the development server and verify it runs clean:
       ```bash
       cd "/Users/RAZER/Documents/projects/sales tracking"
       npm run dev
       ```
       Wait for "Ready" message. Verify:
       - No TypeScript compilation errors
       - No module resolution errors
       - No missing dependency warnings

    3. Test key routes with curl or by checking the dev server output:
       - GET / (should redirect to /dashboard)
       - GET /dashboard (should show dashboard page)
       - GET /login (should show login page)

    4. Run TypeScript type check:
       ```bash
       npx tsc --noEmit
       ```
       Must pass with zero errors.

    5. Run build to verify production readiness:
       ```bash
       npm run build
       ```
       Must complete without errors. This is what Vercel will run.

    6. Attempt Vercel deployment using CLI:
       ```bash
       npx vercel --yes
       ```
       If Vercel CLI is not authenticated, this will prompt for login. If it fails due to auth, note it for the checkpoint task.

       If deployment succeeds, capture the deployment URL.

    AVOID: Do NOT commit .env.local. Do NOT skip the build step -- catching build errors locally is cheaper than debugging on Vercel.
  </action>
  <verify>
    - `npm run build` completes without errors
    - `npx tsc --noEmit` reports zero errors
    - Dev server starts and routes respond correctly
    - `.env.local` is in .gitignore
  </verify>
  <done>
    Development server runs without errors. Production build succeeds. TypeScript compilation clean. All routes respond correctly. Deployment attempted (may require user auth for Vercel).
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Phase 1 foundation:
    - Next.js 16 project with App Router and TypeScript
    - Tailwind CSS v4 with shadcn/ui components
    - Supabase client utilities (server, browser, middleware)
    - Auth middleware with session refresh
    - Route groups: (auth)/login and (dashboard)
    - ThemeProvider with dark mode default
    - Development server running on localhost:3000
    - Production build succeeds
  </what-built>
  <how-to-verify>
    1. Open http://localhost:3000 in your browser
       - Should redirect to /dashboard
       - Should show "Dashboard" heading with three stat cards
       - Should be in dark mode by default
       - Cards should have proper styling (borders, shadows)

    2. Navigate to http://localhost:3000/login
       - Should show centered login card
       - Should show "Sign in with Google" button
       - Button should have proper shadcn/ui styling

    3. Check the terminal running `npm run dev`
       - Should show no errors or warnings
       - Should show successful compilation

    4. If Vercel deployment succeeded:
       - Visit the deployed URL
       - Verify same behavior as localhost
       - Confirm HTTPS works

    5. If Vercel deployment needs auth:
       - Run `npx vercel login` and authenticate
       - Then run `npx vercel --yes` to deploy
       - Or connect via Vercel Dashboard -> Import Git Repository
       - Set environment variables in Vercel Project Settings:
         * NEXT_PUBLIC_SUPABASE_URL
         * NEXT_PUBLIC_SUPABASE_ANON_KEY
         * SUPABASE_SERVICE_ROLE_KEY
         * ANTHROPIC_API_KEY

    6. Verify .env.local has real Supabase credentials:
       - If using placeholder values, replace with real ones from Supabase Dashboard
       - Project Settings -> API -> Project URL and API keys
  </how-to-verify>
  <resume-signal>Type "approved" if everything looks good, or describe any issues you see.</resume-signal>
</task>

</tasks>

<verification>
1. Development server runs on localhost:3000 without errors
2. /dashboard shows styled dashboard with stat cards in dark theme
3. /login shows styled login card with Google sign-in button
4. `npm run build` succeeds (production-ready)
5. `npx tsc --noEmit` reports zero TypeScript errors
6. Vercel deployment accessible at production URL (after user auth)
</verification>

<success_criteria>
- Development server runs locally without errors
- All routes render correctly with proper styling
- Production build succeeds
- Vercel deployment pipeline configured and first deploy succeeds
- User has verified visual quality of foundation UI
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-environment/01-03-SUMMARY.md`
</output>
