# =============================================================================
# Sales Tracking CRM - Production Environment Configuration
# =============================================================================
# This file shows the required environment variables for production deployment
# Copy to .env.production and fill in your production values

# =============================================================================
# NODE ENVIRONMENT
# =============================================================================
NODE_ENV=production

# =============================================================================
# SUPABASE (Required)
# =============================================================================
NEXT_PUBLIC_SUPABASE_URL=https://your-production-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-production-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-production-service-role-key

# =============================================================================
# GOOGLE WORKSPACE (Required)
# =============================================================================
GOOGLE_CLIENT_ID=your-production-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-production-secret
NEXT_PUBLIC_GOOGLE_API_KEY=your-production-api-key
NEXT_PUBLIC_GOOGLE_CLIENT_ID=your-production-client-id.apps.googleusercontent.com

# =============================================================================
# ANTHROPIC AI (Required)
# =============================================================================
ANTHROPIC_API_KEY=your-production-anthropic-api-key

# =============================================================================
# EMAIL / SMTP CONFIGURATION (Required)
# =============================================================================
# Production SMTP (use transactional email service like SendGrid, Mailgun, etc.)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=apikey
SMTP_PASSWORD=your-sendgrid-api-key

SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=Sales Tracking CRM

# Email testing should be disabled in production
EMAIL_TEST_MODE=false

# =============================================================================
# ERROR MONITORING (Strongly Recommended)
# =============================================================================
SENTRY_DSN=https://your-production-sentry-dsn@sentry.io/project-id
NEXT_PUBLIC_SENTRY_DSN=https://your-production-sentry-dsn@sentry.io/project-id

# =============================================================================
# RATE LIMITING (Recommended)
# =============================================================================
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000

# =============================================================================
# LOGGING (Recommended)
# =============================================================================
LOG_LEVEL=warn

# =============================================================================
# DATABASE (Optional)
# =============================================================================
# Supabase provides connection pooling - use this if you need direct database access
DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# =============================================================================
# BACKGROUND JOBS (Required for notifications)
# =============================================================================
# Generate a secure random secret: openssl rand -base64 32
CRON_SECRET=your-secure-random-secret

# =============================================================================
# APPLICATION (Required)
# =============================================================================
NEXT_PUBLIC_APP_URL=https://yourdomain.com

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
#
# 1. SMTP Configuration:
#    - Use a transactional email service (SendGrid, Mailgun, AWS SES, Postmark)
#    - Configure SPF, DKIM, and DMARC records for your domain
#    - Use a dedicated sending domain (e.g., mail.yourdomain.com)
#
# 2. Cron Jobs:
#    - Set up a cron job to call /api/notifications/process every hour
#    - Include Authorization: Bearer ${CRON_SECRET} header
#    - Example: curl -X POST -H "Authorization: Bearer ${CRON_SECRET}" https://yourdomain.com/api/notifications/process
#
# 3. Rate Limiting:
#    - Consider using a Redis-backed rate limiter for multi-instance deployments
#    - Adjust limits based on your expected traffic
#
# 4. Security:
#    - Rotate all secrets regularly
#    - Use separate keys for production and staging
#    - Never commit production credentials to version control
#    - Use environment-specific service accounts for Google APIs
#
# 5. Monitoring:
#    - Set up Sentry alerts for errors
#    - Monitor email delivery rates
#    - Set up uptime monitoring for /api/health
#
# 6. Database:
#    - Enable Point-in-Time Recovery (PITR) in Supabase
#    - Set up regular backups
#    - Monitor database performance and connection pool usage
#
# 7. Email Deliverability:
#    - Warm up your sending IP/domain gradually
#    - Monitor bounce rates and spam complaints
#    - Implement feedback loops with your ESP
#    - Test emails in spam checkers before deployment
